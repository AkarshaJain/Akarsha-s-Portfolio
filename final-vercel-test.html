<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Final Vercel Test - 100x Verification</title>
    <link rel="stylesheet" href="fonts.css">
    <link rel="stylesheet" href="styles.css?v=1.1.0">
    
    <style>
        body {
            background: #000;
            color: #fff;
            font-family: 'Albert Sans', sans-serif;
            margin: 0;
            padding: 1rem;
        }
        
        .test-header {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            background: rgba(0, 0, 0, 0.95);
            border-bottom: 2px solid #fff;
            padding: 1rem;
            z-index: 1000;
        }
        
        .test-content {
            margin-top: 100px;
        }
        
        .test-section {
            border: 2px solid #333;
            margin: 2rem 0;
            padding: 2rem;
            border-radius: 8px;
        }
        
        .test-results {
            background: rgba(255, 255, 255, 0.1);
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
            font-family: monospace;
            font-size: 0.9rem;
        }
        
        .success { color: #51cf66; }
        .error { color: #ff6b6b; }
        .warning { color: #ffd43b; }
        
        .progress-bar {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
            overflow: hidden;
            margin: 1rem 0;
        }
        
        .progress-fill {
            height: 100%;
            background: #51cf66;
            width: 0%;
            transition: width 0.3s ease;
        }
    </style>
</head>
<body>
    <div class="test-header">
        <h2>Final Vercel Test - 100x Verification</h2>
        <div>Test Progress: <span id="progress-text">0/100</span></div>
        <div>Success Rate: <span id="success-rate">0%</span></div>
        <div>Status: <span id="status">Ready</span></div>
        <div class="progress-bar">
            <div class="progress-fill" id="progress-fill"></div>
        </div>
        <button onclick="startTest()">Start 100 Tests</button>
        <button onclick="stopTest()">Stop</button>
    </div>

    <div class="test-content">
        <!-- Actual Contact Section -->
        <div class="test-section">
            <h2>Let's Connect</h2>
            <div class="contact-container">
                <div class="contact-quote">
                    <h3>"The best way to predict the future is to invent it."</h3>
                    <p>- Alan Kay</p>
                </div>
            </div>
        </div>

        <!-- Test Results -->
        <div class="test-section">
            <h3>Live Test Results</h3>
            <div class="test-results" id="live-results">
                Waiting for test to start...
            </div>
        </div>

        <!-- Detailed Analysis -->
        <div class="test-section">
            <h3>Detailed Analysis</h3>
            <div class="test-results" id="detailed-analysis">
                Analysis will appear here...
            </div>
        </div>
    </div>

    <script>
        let testRunning = false;
        let testCount = 0;
        let successCount = 0;
        let testResults = [];
        let testInterval;

        function startTest() {
            if (testRunning) return;
            
            testRunning = true;
            testCount = 0;
            successCount = 0;
            testResults = [];
            
            document.getElementById('status').textContent = 'Running...';
            document.getElementById('status').className = 'warning';
            
            runTest();
        }

        function stopTest() {
            testRunning = false;
            clearInterval(testInterval);
            document.getElementById('status').textContent = 'Stopped';
            document.getElementById('status').className = 'error';
        }

        function runTest() {
            if (!testRunning || testCount >= 100) {
                finishTest();
                return;
            }

            testCount++;
            
            // Run comprehensive test
            const testResult = runComprehensiveTest();
            
            if (testResult.overallSuccess) {
                successCount++;
            }
            
            testResults.push({
                testNumber: testCount,
                timestamp: new Date().toISOString(),
                ...testResult
            });
            
            // Update UI
            updateProgress();
            updateLiveResults(testResult);
            
            // Schedule next test
            setTimeout(runTest, 100);
        }

        function runComprehensiveTest() {
            const heading = document.querySelector('h2');
            const quote = document.querySelector('.contact-quote h3');
            const author = document.querySelector('.contact-quote p');
            
            if (!heading || !quote || !author) {
                return {
                    overallSuccess: false,
                    error: 'Elements not found'
                };
            }
            
            const headingStyle = getComputedStyle(heading);
            const quoteStyle = getComputedStyle(quote);
            const authorStyle = getComputedStyle(author);
            
            // Extract values
            const headingSize = parseFloat(headingStyle.fontSize);
            const quoteSize = parseFloat(quoteStyle.fontSize);
            const authorSize = parseFloat(authorStyle.fontSize);
            
            const quoteFont = quoteStyle.fontFamily;
            const quoteStyleValue = quoteStyle.fontStyle;
            const quoteWeight = quoteStyle.fontWeight;
            
            // Test conditions
            const tests = {
                quoteSmallerThanHeading: quoteSize < headingSize,
                authorSmallerThanQuote: authorSize < quoteSize,
                quoteSizeCorrect: Math.abs(quoteSize - 25.6) < 2,
                authorSizeCorrect: Math.abs(authorSize - 14.4) < 2,
                quoteFontReadable: quoteFont.includes('Albert Sans') || quoteFont.includes('Arial'),
                quoteItalic: quoteStyleValue === 'italic',
                quoteWeightCorrect: quoteWeight === '400'
            };
            
            const overallSuccess = Object.values(tests).every(test => test);
            
            return {
                overallSuccess,
                tests,
                measurements: {
                    headingSize,
                    quoteSize,
                    authorSize,
                    quoteFont,
                    quoteStyle: quoteStyleValue,
                    quoteWeight
                }
            };
        }

        function updateProgress() {
            const progress = (testCount / 100) * 100;
            const successRate = testCount > 0 ? Math.round((successCount / testCount) * 100) : 0;
            
            document.getElementById('progress-text').textContent = `${testCount}/100`;
            document.getElementById('success-rate').textContent = `${successRate}%`;
            document.getElementById('progress-fill').style.width = `${progress}%`;
            
            if (successRate >= 95) {
                document.getElementById('success-rate').className = 'success';
            } else if (successRate >= 80) {
                document.getElementById('success-rate').className = 'warning';
            } else {
                document.getElementById('success-rate').className = 'error';
            }
        }

        function updateLiveResults(result) {
            const liveResults = document.getElementById('live-results');
            
            let html = `<strong>Test ${testCount}:</strong> `;
            html += result.overallSuccess ? '<span class="success">PASS</span>' : '<span class="error">FAIL</span>';
            html += '<br><br>';
            
            html += '<strong>Measurements:</strong><br>';
            html += `Heading: ${result.measurements.headingSize}px<br>`;
            html += `Quote: ${result.measurements.quoteSize}px<br>`;
            html += `Author: ${result.measurements.authorSize}px<br>`;
            html += `Font: ${result.measurements.quoteFont}<br>`;
            html += `Style: ${result.measurements.quoteStyle}<br>`;
            html += `Weight: ${result.measurements.quoteWeight}<br><br>`;
            
            html += '<strong>Tests:</strong><br>';
            Object.entries(result.tests).forEach(([test, passed]) => {
                html += `${test}: ${passed ? '<span class="success">PASS</span>' : '<span class="error">FAIL</span>'}<br>`;
            });
            
            liveResults.innerHTML = html;
        }

        function finishTest() {
            testRunning = false;
            const successRate = Math.round((successCount / 100) * 100);
            
            document.getElementById('status').textContent = successRate >= 95 ? 'READY FOR VERCEL' : 'NEEDS FIXES';
            document.getElementById('status').className = successRate >= 95 ? 'success' : 'error';
            
            // Detailed analysis
            const analysis = document.getElementById('detailed-analysis');
            let html = `<strong>Final Results:</strong><br>`;
            html += `Total Tests: ${testCount}<br>`;
            html += `Successful: ${successCount}<br>`;
            html += `Success Rate: ${successRate}%<br>`;
            html += `Vercel Ready: ${successRate >= 95 ? 'YES' : 'NO'}<br><br>`;
            
            if (successRate < 95) {
                html += '<strong>Issues Found:</strong><br>';
                const failedTests = testResults.filter(r => !r.overallSuccess);
                failedTests.slice(0, 5).forEach(r => {
                    html += `Test ${r.testNumber}: ${JSON.stringify(r.tests)}<br>`;
                });
            }
            
            analysis.innerHTML = html;
            
            // Console log for debugging
            console.log('=== FINAL VERCEL TEST RESULTS ===');
            console.log(`Success Rate: ${successRate}%`);
            console.log(`Vercel Ready: ${successRate >= 95 ? 'YES' : 'NO'}`);
            console.log('All test results:', testResults);
        }

        // Auto-start test after 2 seconds
        setTimeout(() => {
            if (!testRunning) {
                startTest();
            }
        }, 2000);
    </script>
</body>
</html> 